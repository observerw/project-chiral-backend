{"openapi":"3.0.0","paths":{"/api-docs":{"get":{"operationId":"getApiDocs","summary":"","description":"","parameters":[],"responses":{"200":{"description":""}}}},"/event/{id}":{"get":{"operationId":"get","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventEntity"}}}}},"tags":["event"]},"put":{"operationId":"update","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateEventDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventEntity"}}}}},"tags":["event"]},"delete":{"operationId":"remove","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}},{"name":"cascade","required":true,"in":"query","schema":{"type":"boolean"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EventEntity"}}}}}},"tags":["event"]}},"/event/{id}/detail":{"get":{"operationId":"getDetail","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventDetailEntity"}}}}},"tags":["event"]}},"/event/range":{"get":{"operationId":"getByRange","summary":"","description":"","parameters":[{"name":"unit","required":true,"in":"query","schema":{"minimum":0,"maximum":8,"type":"number"}},{"name":"start","required":true,"in":"query","schema":{"format":"date-time","type":"string"}},{"name":"end","required":true,"in":"query","schema":{"format":"date-time","type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EventEntity"}}}}}},"tags":["event"]}},"/event/serial":{"get":{"operationId":"getBySerial","summary":"","description":"","parameters":[{"name":"serial","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}},"tags":["event"]}},"/event/search/name":{"get":{"operationId":"searchByName","summary":"","description":"","parameters":[{"name":"text","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EventEntity"}}}}}},"tags":["event"]}},"/event":{"post":{"operationId":"create","summary":"","description":"","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateEventDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventEntity"}}}}},"tags":["event"]}},"/event/{id}/content":{"get":{"operationId":"getContent","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventContentEntity"}}}}},"tags":["event"]},"put":{"operationId":"updateContent","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateContentDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventContentEntity"}}}}},"tags":["event"]}},"/event/search/content":{"get":{"operationId":"searchContent","summary":"","description":"","parameters":[{"name":"text","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EventEntity"}}}}}},"tags":["event"]}},"/event/{id}/todo":{"get":{"operationId":"getTodos","summary":"","description":"获取某个事件的全部todo项","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/EventTodoEntity"}}}}}},"tags":["event"]},"post":{"operationId":"createTodo","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTodoDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventTodoEntity"}}}}},"tags":["event"]},"put":{"operationId":"updateTodo","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTodoDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventTodoEntity"}}}}},"tags":["event"]}},"/event/todo/{id}":{"get":{"operationId":"getTodo","summary":"","description":"获取单个todo项","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventTodoEntity"}}}}},"tags":["event"]},"delete":{"operationId":"removeTodo","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventTodoEntity"}}}}},"tags":["event"]}},"/user":{"get":{"operationId":"get","summary":"","description":"","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}},"tags":["user"]},"delete":{"operationId":"delete","summary":"","description":"","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}},"tags":["user"]}},"/user/login":{"post":{"operationId":"login","summary":"","description":"","parameters":[],"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserLoginRespDto"}}}}},"tags":["user"]}},"/user/register":{"post":{"operationId":"register","summary":"","description":"","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserEntity"}}}}},"tags":["user"]}},"/project":{"post":{"operationId":"create","summary":"","description":"创建新项目","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateProjectDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectEntity"}}}}},"tags":["project"]},"get":{"operationId":"get","summary":"","description":"获取项目信息","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectEntity"}}}}},"tags":["project"]},"put":{"operationId":"update","summary":"","description":"更新项目信息","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateProjectDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectEntity"}}}}},"tags":["project"]},"delete":{"operationId":"remove","summary":"","description":"删除项目","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProjectEntity"}}}}},"tags":["project"]}},"/project/workspace":{"get":{"operationId":"getWorkspace","summary":"","description":"获取工作区信息","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceEntity"}}}}},"tags":["project"]},"put":{"operationId":"updateWorkspace","summary":"","description":"更新工作区信息","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateWorkspaceDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkspaceEntity"}}}}},"tags":["project"]}},"/project/settings":{"get":{"operationId":"getSettings","summary":"","description":"获取项目设置","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingsEntity"}}}}},"tags":["project"]},"put":{"operationId":"updateSettings","summary":"","description":"更新项目设置","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSettingsDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SettingsEntity"}}}}},"tags":["project"]}},"/character":{"post":{"operationId":"create","summary":"","description":"","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCharacterDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CharacterEntity"}}}}}},"get":{"operationId":"getAll","summary":"","description":"","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CharacterEntity"}}}}}}}},"/character/{id}":{"get":{"operationId":"get","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CharacterEntity"}}}}}},"put":{"operationId":"update","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateCharacterDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CharacterEntity"}}}}}},"delete":{"operationId":"remove","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CharacterEntity"}}}}}}},"/character/search/name":{"get":{"operationId":"searchByName","summary":"","description":"","parameters":[{"name":"text","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CharacterEntity"}}}}}}}},"/scene":{"post":{"operationId":"create","summary":"","description":"","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateSceneDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SceneEntity"}}}}}}},"/scene/{id}":{"get":{"operationId":"get","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SceneEntity"}}}}}},"put":{"operationId":"update","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateSceneDto"}}}},"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SceneEntity"}}}}}},"delete":{"operationId":"remove","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SceneEntity"}}}}}}},"/scene/search/name":{"get":{"operationId":"searchByName","summary":"","description":"","parameters":[{"name":"text","required":true,"in":"query","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/SceneEntity"}}}}}}}},"/worldview":{"post":{"operationId":"create","summary":"","description":"","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateWorldviewDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorldviewEntity"}}}}}}},"/worldview/{id}":{"get":{"operationId":"get","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorldviewEntity"}}}}}},"post":{"operationId":"update","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateWorldviewDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorldviewEntity"}}}}}},"delete":{"operationId":"remove","summary":"","description":"","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorldviewEntity"}}}}}}}},"info":{"title":"","description":"","version":"1.0.0","contact":{}},"tags":[],"servers":[],"components":{"securitySchemes":{"bearer":{"scheme":"bearer","bearerFormat":"JWT","type":"http"}},"schemas":{"EventEntity":{"type":"object","properties":{"type":{"type":"string","enum":["ATOM","COLLECTION"]},"id":{"type":"number"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"color":{"type":"string"},"serial":{"type":"number"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deleted":{"format":"date-time","type":"string","nullable":true},"unit":{"type":"number"},"start":{"format":"date-time","type":"string"},"end":{"format":"date-time","type":"string"},"contentId":{"type":"number","nullable":true},"projectId":{"type":"number"}},"required":["type","id","name","description","color","serial","createdAt","updatedAt","deleted","unit","start","end","contentId","projectId"]},"EventDetailEntity":{"type":"object","properties":{"type":{"type":"string","enum":["ATOM","COLLECTION"]},"id":{"type":"number"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"color":{"type":"string"},"serial":{"type":"number"},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deleted":{"format":"date-time","type":"string","nullable":true},"unit":{"type":"number"},"start":{"format":"date-time","type":"string"},"end":{"format":"date-time","type":"string"},"contentId":{"type":"number","nullable":true},"projectId":{"type":"number"},"superEvents":{"type":"array","items":{"$ref":"#/components/schemas/EventEntity"}},"subEvents":{"type":"array","items":{"$ref":"#/components/schemas/EventEntity"}},"brief":{"type":"string"}},"required":["type","id","name","description","color","serial","createdAt","updatedAt","deleted","unit","start","end","contentId","projectId","superEvents","subEvents"]},"CreateEventDto":{"type":"object","properties":{"type":{"type":"string","enum":["ATOM","COLLECTION"]},"name":{"type":"string"},"description":{"type":"string","nullable":true},"color":{"type":"string"},"unit":{"type":"number","minimum":0,"maximum":8},"start":{"format":"date-time","type":"string"},"end":{"format":"date-time","type":"string"}},"required":["type","name","description","color","unit","start","end"]},"UpdateEventDto":{"type":"object","properties":{"type":{"type":"string","enum":["ATOM","COLLECTION"]},"name":{"type":"string"},"description":{"type":"string","nullable":true},"color":{"type":"string"},"unit":{"type":"number","minimum":0,"maximum":8},"start":{"format":"date-time","type":"string"},"end":{"format":"date-time","type":"string"}}},"EventContentEntity":{"type":"object","properties":{"id":{"type":"number"},"updatedAt":{"format":"date-time","type":"string"},"content":{"type":"string"},"eventId":{"type":"number"}},"required":["id","updatedAt","content","eventId"]},"UpdateContentDto":{"type":"object","properties":{"content":{"type":"string"}}},"EventTodoEntity":{"type":"object","properties":{"id":{"type":"number"},"title":{"type":"string"},"color":{"type":"string","nullable":true},"checked":{"type":"boolean"},"eventId":{"type":"number","nullable":true}},"required":["id","title","color","checked","eventId"]},"CreateTodoDto":{"type":"object","properties":{"title":{"type":"string"},"color":{"type":"string","nullable":true}},"required":["title","color"]},"UpdateTodoDto":{"type":"object","properties":{"color":{"type":"string"},"checked":{"type":"boolean"}}},"UserEntity":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string"},"phone":{"type":"string","nullable":true},"email":{"type":"string","nullable":true},"avatar":{"type":"string","nullable":true}},"required":["id","username","phone","email","avatar"]},"UserLoginRespDto":{"type":"object","properties":{"access_token":{"type":"string"}},"required":["access_token"]},"CreateUserDto":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"},"phone":{"type":"string"},"email":{"type":"string"}},"required":["username","password"]},"CreateProjectDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}},"required":["name","description"]},"ProjectEntity":{"type":"object","properties":{"id":{"type":"number"},"serial":{"type":"number"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"createdAt":{"format":"date-time","type":"string"},"updatedAt":{"format":"date-time","type":"string"},"deleted":{"format":"date-time","type":"string","nullable":true}},"required":["id","serial","name","description","createdAt","updatedAt","deleted"]},"UpdateProjectDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}}},"WorkspaceEntity":{"type":"object","properties":{"id":{"type":"number"},"origin":{"type":"string","nullable":true},"layout":{"nullable":true,"type":"array","items":{"type":"object"}},"lock":{"type":"boolean"},"projectId":{"type":"number"}},"required":["id","origin","layout","lock","projectId"]},"UpdateWorkspaceDto":{"type":"object","properties":{"origin":{"type":"string"},"layout":{"type":"array","items":{"type":"object"}},"lock":{"type":"boolean"}}},"SettingsEntity":{"type":"object","properties":{"id":{"type":"number"},"projectId":{"type":"number"},"darkMode":{"type":"boolean"}},"required":["id","projectId","darkMode"]},"UpdateSettingsDto":{"type":"object","properties":{"darkMode":{"type":"boolean"}}},"CreateCharacterDto":{"type":"object","properties":{"name":{"type":"string"},"alias":{"type":"array","items":{"type":"string"}},"description":{"type":"string"},"avatar":{"type":"string"},"unit":{"type":"number","minimum":0,"maximum":8},"start":{"format":"date-time","type":"string"},"end":{"format":"date-time","type":"string"}},"required":["name"]},"CharacterEntity":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"alias":{"type":"array","items":{"type":"string"}},"description":{"type":"string","nullable":true},"avatar":{"type":"string","nullable":true},"deleted":{"format":"date-time","type":"string","nullable":true},"unit":{"type":"number","nullable":true},"start":{"format":"date-time","type":"string","nullable":true},"end":{"format":"date-time","type":"string","nullable":true}},"required":["id","name","alias","description","avatar","deleted","unit","start","end"]},"CreateSceneDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}},"required":["name"]},"SceneEntity":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"alias":{"type":"array","items":{"type":"string"}},"description":{"type":"string","nullable":true},"deleted":{"format":"date-time","type":"string","nullable":true},"superId":{"type":"number","nullable":true}},"required":["id","name","alias","description","deleted","superId"]},"UpdateSceneDto":{"type":"object","properties":{"subSceneIds":{"type":"array","items":{"type":"number"}},"superSceneId":{"type":"number"},"name":{"type":"string"},"description":{"type":"string"}}},"CreateWorldviewDto":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}},"required":["name"]},"WorldviewEntity":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"description":{"type":"string","nullable":true},"content":{"type":"string"},"images":{"type":"array","items":{"type":"string"}},"deleted":{"format":"date-time","type":"string","nullable":true},"superId":{"type":"number","nullable":true}},"required":["id","name","description","content","images","deleted","superId"]},"UpdateWorldviewDto":{"type":"object","properties":{"content":{"type":"string"},"name":{"type":"string"},"description":{"type":"string"}}}}}}